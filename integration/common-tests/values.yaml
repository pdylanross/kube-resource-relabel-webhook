relabel:
  - name: "airflow-k8s-pod-operator-do-not-evict"
    conditions:
      - type: is-type
        value:
          kind: pod
          version: v1
      - type: has-label
        value:
          keys:
            - dag_id
    actions:
      - type: ensure-annotation
        value:
          karpenter.sh/do-not-evict: "true"
  - name: "cleanup-fluentd-labels"
    conditions:
      - type: is-type
        value:
          kind: pod
          version: v1
      - type: has-annotation
        value:
          match:
            fluentd.active: "true"
    actions:
      - type: ensure-label
        value:
          fluentd.active: "true"
  - name: "add-test2-label"
    conditions:
      - type: is-type
        value:
          kind: pod
          version: v1
      - type: has-annotation
        value:
          keys:
            - test2
    actions:
      - type: ensure-label
        value:
          test2: "value"

replicaCount: 1
fullnameOverride: kube-resource-relabel-webhook